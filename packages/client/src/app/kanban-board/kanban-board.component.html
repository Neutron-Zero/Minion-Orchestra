<div class="kanban-board">
  <div class="kanban-column" *ngFor="let col of columns; trackBy: trackByColumn">
    <div class="column-header" [style.borderColor]="col.color">
      <span class="column-label">{{ col.label }}</span>
      <span class="column-count" [style.backgroundColor]="col.color">{{ col.agents.length }}</span>
    </div>
    <div class="column-body">
      <div class="kanban-card"
           *ngFor="let agent of col.agents; trackBy: trackByAgent"
           [style.borderLeftColor]="getAgentColor(agent.id)">
        <div class="card-header">
          <span class="agent-id">{{ getFormattedAgentId(agent.id) }}</span>
          <span class="agent-folder" *ngIf="getFolderName(agent)">{{ getFolderName(agent) }}</span>
          <span class="elapsed" *ngIf="agent.status !== 'completed'">{{ getElapsedTime(agent.startTime) }}</span>
        </div>
        <div class="card-task" *ngIf="agent.currentTask">{{ agent.currentTask }}</div>
        <div class="card-tool" *ngIf="agent.currentTool">
          <span class="tool-pill">{{ agent.currentTool }}</span>
        </div>
        <div class="card-actions">
          <button mat-icon-button matTooltip="Focus terminal" (click)="focus.emit(agent)">
            <mat-icon>open_in_new</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Remove" (click)="remove.emit(agent)">
            <mat-icon>close</mat-icon>
          </button>
        </div>
      </div>
      <div class="empty-column" *ngIf="col.agents.length === 0">
        No agents
      </div>
    </div>
  </div>
</div>
